<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Bouncing Ball Test Theme</title>
  </head>
  <body>
    <!-- FPS hint read by the uploader UI (1-30). -->
    <fps>10</fps>

    <!--
      Simple Bouncing Ball Test Theme
      This tests the theme system without complex logic.
    -->
    <script>
      // Required: Initialize theme state
      function themeInit() {
        console.log('Bounce themeInit called');
        return {
          ballX: 32,        // Ball X position
          ballY: 32,        // Ball Y position
          vx: 1,            // X velocity
          vy: 1,            // Y velocity
          ballSize: 8,      // Ball radius
          ballColor: '#ff0000',  // Red ball
          bgColor: '#000000'     // Black background
        };
      }

      // Required: Render function called each frame
      function themeRender(ctx, w, h, state, t) {
        // Clear background
        ctx.fillStyle = state.bgColor;
        ctx.fillRect(0, 0, w, h);

        // Update ball position
        state.ballX += state.vx;
        state.ballY += state.vy;

        // Bounce off walls
        if (state.ballX <= state.ballSize || state.ballX >= w - state.ballSize) {
          state.vx = -state.vx;
        }
        if (state.ballY <= state.ballSize || state.ballY >= h - state.ballSize) {
          state.vy = -state.vy;
        }

        // Keep ball in bounds
        state.ballX = Math.max(state.ballSize, Math.min(w - state.ballSize, state.ballX));
        state.ballY = Math.max(state.ballSize, Math.min(h - state.ballSize, state.ballY));

        // Draw ball
        ctx.fillStyle = state.ballColor;
        ctx.beginPath();
        ctx.arc(state.ballX, state.ballY, state.ballSize, 0, Math.PI * 2);
        ctx.fill();
      }

      console.log('Bounce theme loaded, themeInit exists:', typeof themeInit);
      console.log('Bounce theme loaded, themeRender exists:', typeof themeRender);
    </script>
  </body>
</html>