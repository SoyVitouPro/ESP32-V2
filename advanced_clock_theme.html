<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Advanced Digital Clock Theme</title>
</head>
<body>
    <fps>1</fps>

    <script>
        // ========================================
        // ADVANCED CLOCK THEME FOR ESP32
        // ========================================

        const themeSettings = {
            textColor: '#00ff00',
            bgColor: '#000000',
            fontSize: 20,
            fontFamily: 'monospace',
            fontWeight: 'bold',
            timeFormat: '24',
            showSeconds: true,
            pulseEffect: false,
            glowEffect: false
        };

        function pad(n) { return (n < 10 ? '0' : '') + n; }

        function formatTime(fmt, d, showSeconds) {
            let h = d.getHours();
            let m = d.getMinutes();
            let s = d.getSeconds();
            let suffix = '';

            if (fmt === '12') {
                suffix = (h < 12) ? ' AM' : ' PM';
                h = h % 12;
                if (h === 0) h = 12;
            }

            let timeStr = pad(h) + ':' + pad(m);
            if (showSeconds) timeStr += ':' + pad(s);
            timeStr += suffix;

            return timeStr;
        }

        function themeInit() {
            console.log('ðŸŽ¨ Advanced Clock Theme Initialized');
            return { settings: themeSettings };
        }

        function themeRender(ctx, w, h, state, t) {
            const settings = state.settings;
            const now = new Date(t || Date.now());

            // Background
            ctx.fillStyle = settings.bgColor;
            ctx.fillRect(0, 0, w, h);

            // Calculate font size based on panel dimensions
            const fontSize = Math.min(Math.floor(h * 0.7), Math.floor(w * 0.15));

            // Setup text
            ctx.font = `${settings.fontWeight} ${fontSize}px ${settings.fontFamily}`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = settings.textColor;

            // Apply effects
            if (settings.pulseEffect) {
                const pulse = Math.sin(Date.now() / 500) * 0.3 + 0.7;
                ctx.globalAlpha = pulse;
            }

            if (settings.glowEffect) {
                ctx.shadowColor = settings.textColor;
                ctx.shadowBlur = 10;
            }

            // Draw time
            const timeString = formatTime(settings.timeFormat, now, settings.showSeconds);
            ctx.fillText(timeString, w / 2, h / 2);

            // Reset effects
            ctx.globalAlpha = 1;
            ctx.shadowBlur = 0;
        }

        console.log('ðŸŽ¨ Advanced Clock Theme Loaded Successfully!');
    </script>
</body>
</html>